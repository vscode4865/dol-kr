:: StoryCaption
<div @class="(Errors.log.length==0?'hidden':'') + ' error-reporter-btn'" onclick="Errors.Reporter.toggle()"></div>
<<if $intro is 0>>
	<<effectstime>>
	<<weatherdisplay>>
	<<if $gamemode is "soft">>
		<<set $pain to 0>>
	<</if>>
	<<if $images is 1>>
		<<addclass body has-images>>
		<<removeclass body no-images>>
		<div id="sidebar-img-container">
			<<img>>
		</div>
	<<else>>
		<<removeclass body has-images>>
		<<addclass body no-images>>
	<</if>>
	<<combateffects>>
<div id="storyCaptionDiv" @class="($extendedStats ? 'storyCaptionDivExtended' : '')">
	<div id="debugWindow"></div>
	<<if $numpad is true>>
		<style>
			.mob-btn-group>div{
			padding: 10px;background-color: rgb(34, 34, 34);color: #fff;border: 1px solid rgb(68, 68, 68);border-radius: 5px 0 0;
			}
			.mob-btn-group>div:hover{background-color: rgb(51, 51, 51);}
		</style>
		<div class="mob-btn-group" style="position: fixed;top: 100px;right: 0;display: flex; align-items: center;flex-direction: column;">
			<div class="mob-btn-h" onclick="mobBtnShow()" style="display:none;"></div>
			<div class="mob-btn" onclick="mobBtnHide()"></div>
			<div class="mob-btn" onclick="mobclick(1)">1</div>
			<div class="mob-btn" onclick="mobclick(2)">2</div>
			<div class="mob-btn" onclick="mobclick(3)">3</div>
			<div class="mob-btn" onclick="mobclick(4)">4</div>
			<div class="mob-btn" onclick="mobclick(5)">5</div>
			<div class="mob-btn" onclick="mobclick(6)">6</div>
			<div class="mob-btn" onclick="mobclick(7)">7</div>
			<div class="mob-btn" onclick="mobclick(8)">8</div>
			<div class="mob-btn" onclick="mobclick(9)">9</div>
			<div class="mob-btn" onclick="mobclick(10)">0</div>
		</div>
	<</if>>
	<<if $endeventerror isnot undefined>>
		<<if $debugdisable is "f">>
			<<if $images is 1>><img class="layer-sexmouth" src="img/ui/sym_awareness.png"><</if>><span class="red"><<print StartConfig.version>> Error: An NPC generated on the "$endeventerror" passage broke free. Please inform Vrelnir. <<if $cheatdisable is "f">>Disregard this if you've just used a cheat.<</if>></span>
			<br><br>
		<</if>>
		<<unset $endeventerror>>
	<</if>>

	<<if $physiquechange is 1>><<set $physiquechange to 0>>
		<<if $physiqueuse gte $physique / 1000>>
			<span class="gold">그동안 해온 운동 덕분에 신체 능력이 좋아지고 있다.</span>
			<<set $physiqueuse to 0>>
			<br><br>
		<<else>>
			<span class="pink">어제는 운동을 충분히 하지 않았기에, 그 결과로 신체 능력이 약간 떨어졌다.</span>
			<<set $physiqueuse to 0>>
			<br><br>
		<</if>>
	<</if>>
	<<if !$lessonmissedtext>>
	<<else>>
		<<if $lessonmissedtext is 1>>
			<span class="pink">어제 수업을 하나 빼먹었다.</span>
		<<elseif $lessonmissedtext gte 2>>
			<span class="pink">어제 $lessonmissedtext개의 수업을 빼먹었다.</span>
		<</if>>
		<<if $lessonmissed gte 50>>
			<span class="red">다량의 수업에 결석했다. 그 사실이 경찰에게 통보되었다.</span>
			<<crimeup 25>>
		<</if>>
		<<set $lessonmissedtext to 0>>
		<br>
	<</if>>
	<<if $images is 1>>
		<div id="stats" @class="($extendedStats ? 'statsExtended' : '')" onclick="extendStats()">
			<<statsCaption>>
		</div>
	<<else>>
		<div id="money-noimg">
			<<statsMoneyNoImg>>
		</div>
		<br>

		지금은 <<ampm>> 이다.
		<br>
		오늘은 <<print getWeekDay($weekday)>>이다.
		<br>
	<</if>>
	<<schoolday>>
	<br>
	<div id="sidebar-look-description">
		<<sidebarlookdescription>>
	</div>
	<br>

	<<clamp>>

	<<calculateallure>>
	<<set $rng to random(1, 100)>>

	<<if $worn.neck.collared gte 1>>
		<span class="pink">개목걸이가 당신의 목을 감싸고 있다.</span>
		<br>
	<</if>>

	<<if $penilechastityparasite isnot 0>>
		<span class="pink"><<trChastityParasite $penilechastityparasite "이">>_trResult 자지를 감싼 채로 꿈틀거리는 것이 느껴진다.</span>
		<br>
	<</if>>
	<<if $vaginalchastityparasite isnot 0 and $vaginalchastityparasite eq $analchastityparasite>>
		<span class="pink"><<trChastityParasite $vaginalchastityparasite "이">>_trResult 보지와 하복부 안에서 꿈틀거리는 것이 느껴진다.</span>
		<br>
	<<else>>
		<<if $vaginalchastityparasite isnot 0>>
			<span class="pink"><<trChastityParasite $vaginalchastityparasite "이">>_trResult 보지 안에서 꿈틀거리는 것이 느껴진다.</span>
			<br>
		<</if>>
		<<if $analchastityparasite isnot 0>>
			<span class="pink"><<trChastityParasite $analchastityparasite "이">>_trResult 하복부 안에서 꿈틀거리는 것이 느껴진다.</span>
			<br>
		<</if>>
	<</if>>

	<<for _type range $parasite.types>>
		<<switch $parasite[_type].length>>
		<<case 0>>
		<<case 1>>
			<<if $parasite[_type][0] is "nipples">>
				<span class="pink"><<trParasite _type "이">>_trResult <<trBodypart $parasite[_type][0]>>_trResult에 달라붙어 물고 빨고 하고 있다.</span>
			<<else>>
				<span class="pink"><<trParasite _type "이">>_trResult <<trBodypart $parasite[_type][0]>>_trResult에 달라붙어 물고 빨고 하고 있다.</span>
			<</if>>
			<br>
		<<case 2>>
			<span class="pink"><<trParasite _type "이">>_trResult <<trBodypart $parasite[_type][0] "과">>_trResult <<trBodypart $parasite[_type][1]>>_trResult에 달라붙어 물고 빨고 하고 있다.</span>
			<br>
		<<default>>
			<<trBodypart $parasite[_type][0] "과">><<set _pstring to _trResult>>
			<<for _i to 1; _i lt $parasite[_type].length - 1; _i++>>
			<<trBodypart $parasite[_type][_i]>><<set _pstring += ", " + _trResult>>
			<</for>>
			<<trBodypart $parasite[_type][_i]>><<set _pstring += ", " + _trResult>>
			<span class="pink"><<trParasite _type "이">>_trResult _pstring에 달라붙어 물고 빨고 하고 있다.</span>
			<br>
		<</switch>>
	<</for>>

	<<if $parasite.left_ear.name and $parasite.left_ear.name eq $parasite.right_ear.name>>
		<<if $parasite.left_ear.name is "slime">>
			<span class="lewd">양쪽 귀의 <<trParasite $parasite.left_ear.name "이">>_trResult 당신의 사고에 영향을 주고 있다.</span>
			<br>
		<</if>>
	<<else>>
		<<if $parasite.left_ear.name is "slime">>
			<span class="lewd">왼쪽 귀의 <<trParasite $parasite.left_ear.name "이">>_trResult 당신의 사고에 영향을 주고 있다.</span>
			<br>
		<</if>>
		<<if $parasite.right_ear.name is "slime">>
			<span class="lewd">오른쪽 귀의 <<trParasite $parasite.right_ear.name "이">>_trResult 당신의 사고에 영향을 주고 있다.</span>
			<br>
		<</if>>
	<</if>>

	<<if $leftarm is "bound" and $rightarm is "bound">>
		<span class="pink">당신의 양팔이 묶여있다.</span>
		<br>
	<<elseif $leftarm is "bound">>
		<span class="purple">당신의 왼팔이 묶여있다.</span>
		<br>
	<<elseif $rightarm is "bound">>
		<span class="purple">당신의 오른팔이 묶여있다.</span>
		<br>
	<</if>>
	<<if $feetuse is "bound" or $worn.feet.type.includes("shackle")>>
		<span class="pink">당신의 양다리가 묶여있다.</span>
		<br>
	<</if>>
	<<goo>>

	<div id="statmeters">
		<<if $gamemode isnot "soft">>
			<<paincaption>>
		<</if>>
		<<arousalcaption>>
		<<tirednesscaption>>
		<<stresscaption>>
		<<if $innocencestate is 1>>
			<<innocencecaption>>
		<<else>>
			<<traumacaption>>
		<</if>>
		<<if $gamemode isnot "soft">>
			<<controlcaption>>
		<</if>>
		<<allurecaption>>
		<<if $underwater is 1>>
			<<oxygencaption true>>
		<</if>>
		<<drunk>><<drugged>><<hallucinogen>>
	</div>
	<br>
	<<if $passage isnot "Start" and $passage isnot "Start2">>
		<<if $sidebarTime is "top">>
			<<append #mobileStats>><<mobileStatsTime>><</append>>
		<</if>>
		<<if $sidebarStats isnot "Disabled">>
			<<append #mobileStats>><<mobileStats>><</append>>
		<</if>>
		<<if $sidebarTime is "bottom">>
			<<append #mobileStats>><<mobileStatsTime>><</append>>
		<</if>>
	<</if>>

	<<if $tipdisable is "f">>
		<span class="gold">팁:</span> <<tips>>
		<br><br>
	<</if>>

	<<button 정보>>
		<<overlayReplace "characteristics">>
	<</button>>
	<<button 관계>>
		<<overlayReplace "social">>
	<</button>>
	<div class="sidebarButtonSplit">
		<<button 특성>>
			<<overlayReplace "traits">>
		<</button>>
		<<button 일지>>
			<<overlayReplace "journal">>
		<</button>>
	</div>
	<div class="sidebarButtonSplit">
		<<button 통계>>
			<<overlayReplace "statistics">>
		<</button>>
		<<button 도전과제>>
			<<overlayReplace "gameFeats">>
		<</button>>
	</div>
	<br>
	<div class="sidebarButtonSplit">
		<<if $dancing is 0 and $combat is 0 and $passage isnot "Start2" and $cheatdisable is "f" or $debug is 1>>
			<<button 치트>>
				<<overlayReplace "cheats">>
			<</button>>
		<</if>>
		<<if $debug is 1>>
			<<debug>>
		<</if>>
	</div>
	<!-- Event debug button - Shows an overlay stored in debug-events.twee. -->
	<<if $event isnot undefined and $debugdisable is "f">>
		<<set _temp to "<span class='yellow'>SHOW EVENT INFO</span>">>
		<<if EventSystem.Get(0).area[0] is $passage>>
			<<set _eventalertmajorarea to false>>
			<<set _temp to "<span class='green'>EVENT ACTIVE</span>">>
		<<elseif setup.majorAreas.includes($passage)>>
			<<set _eventalertmajorarea to true>>
			<<set _temp to "<span class='red'>EVENT ACTIVE</span>">>
		<<elseif $event.buffer.map(e => e.area[0]).length is 1 and ["Forest Cabin", "Eden Cabin", "Eden Clearing"].includes(EventSystem.Get(0).area[0])>>
			<<set _temp to "<span class='green'>EVENT ACTIVE</span>">>
		<</if>>
		<<button _temp>><<overlayReplace "eventExtraInfo">><</button>>
		<<unset _temp>>
	<</if>>
	<<if $showDebugRenderer>>
		<<button "DEBUG RENDERER">><<overlayReplace "canvasModel">><</button>>
	<</if>>
	<div class="sidebarButtonSplit">
		<<button 옵션>>
			<<overlayReplace "options">>
		<</button>>
		<<button 세이브>>
			<<overlayReplace "saves">>
		<</button>>
	</div>
</div>
<<else>>
	<<if StartConfig.enableImages is true>>
		<div id="startingPlayerImage" class="hidden"></div>
	<</if>>
	<div id="versioninfo"><<versioninfo>></div>
		<<button 세이브>>
			<<overlayReplace "saves">>
		<</button>>
	<div class="sidebarButtonSplit">
		<<button 옵션>>
			<<overlayReplace "options">>
		<</button>>
		<<button 도전과제>>
			<<overlayReplace "startFeats">>
		<</button>>
	</div>
<</if>>

<br>

<<set $currentOverlay to null>>


:: Widgets Clothing Caption [widget]
<<widget "sidebarlookdescription">>
	<!--old version
	<<clothingcaption>>
	<br>
	<<stripcaption>>

	<<if ($player.gender is "m" or $player.gender is "h") and $player.gender_appearance is "f">>
		<<if $breastindicator is 1>>
			<span class="pink">노출된 가슴 때문에 사람들은 당신이 여자라고 생각할 것이다!</span>
			<br>
		<<elseif $exposed gte 2>>
			<span class="pink">겉모습만 보면 사람들은 당신이 여자라고 생각할 것이다!</span>
			<br>
		<<else>>
			<span class="pink">옷차림 때문에 사람들은 당신이 여자라고 생각할 것이다!</span>
			<br>
		<</if>>
	<<elseif ($player.gender is "f" or $player.gender is "h") and $player.gender_appearance is "m">>
		<<if $breastindicator is 0 and $worn.upper.exposed is 2 and $worn.under_upper.exposed gte 1>>
			<span class="pink">노출된 평평한 가슴 때문에 사람들은 당신이 남자라고 생각할 것이다!</span>
			<br>
		<<elseif $exposed gte 2>>
			<span class="pink">겉모습만 보면 사람들은 당신이 남자라고 생각할 것이다!</span>
		<<else>>
			<span class="pink">옷차림 때문에 사람들은 당신이 남자라고 생각할 것이다!</span>
			<br>
		<</if>>
	<</if>>-->
	<<clothingCaptionText>>

	<<switch $body_temperature>>
	<<case "hot">>
		<span class="red">당신은 무더위에 시달리고 있다.</span>
	<<case "warm">>
		<span class="purple">당신은 따뜻하고, 땀을 흘린다.</span>
	<<case "chilly">>
		<<if _water_warmth>>
			<span class="purple">당신은 찬 물 때문에 추위를 느낀다.</span>
		<<else>>
			<span class="purple">당신은 쌀쌀함을 느낀다.</span>
		<</if>>
	<<case "cold">>
		<<if _water_warmth>>
			<span class="red">당신은 얼어붙을 듯한 물 속에서 떨고 있다.</span>
		<<else>>
			<span class="red">당신은 떨고 있다.</span>
		<</if>>
	<<default>>
		<<if _water_warmth>>
			<span class="green">물이 따뜻하다.</span>
		<<else>>
			<span class="green">몸이 아늑하다.</span>
		<</if>>
	<</switch>>
<</widget>>

<<widget "calculateallure">>
	<<if $daystate is "night">>
		<<set $nightmod to 1.5>>
	<<else>>
		<<set $nightmod to 1>>
	<</if>>

	<<if $exposed gte 2>>
		<<set $exposedmod to 1.4>>
	<<elseif $exposed gte 1>>
		<<set $exposedmod to 1.2>>
	<<else>>
		<<set $exposedmod to 1>>
	<</if>>

	<<set $allure to (($beauty / 3) + $hairlength / 4 + $worn.upper.reveal + $worn.lower.reveal)>>
	<<if $worn.upper.type.includes("naked")>><<set $allure += $worn.under_upper.reveal>><</if>>
	<<if $worn.lower.type.includes("naked")>><<set $allure += $worn.under_lower.reveal>><</if>>
	<<set $allure *= $nightmod>>
	<<set $allure *= $exposedmod>>
	<<set $allure += $worn.head.reveal>>
	<<set $allure += $worn.face.reveal>>
	<<set $allure += $worn.neck.reveal>>
	<<set $allure += $worn.legs.reveal>>
	<<set $allure += $worn.feet.reveal>>
	<<if $wolfgirl gte 6>><<set $allure += 500>><</if>>
	<<if $demon gte 6>><<set $allure += 500>><</if>>
	<<if $angel gte 6>><<set $allure += 500>><</if>>
	<<if $fallenangel gte 2>><<set $allure += 500>><</if>>
	<<if $cat gte 6>><<set $allure += 500>><</if>>
	<<if $cow gte 6>><<set $allure += 500>><</if>>
	<<if $harpy gte 6>><<set $allure += 500>><</if>>
	<<goocount>><<set $allure += ($goocount * 50) + ($semencount * 50)>>

	<<if $makeup.lipstick != 0>><<set $allure += 100>><</if>>
	<<if $makeup.eyeshadow != 0>><<set $allure += 100>><</if>>
	<<if $makeup.mascara != 0>><<set $allure += 100>><</if>>

	<<set $allure += ($famesex / 10)>>
	<<set $allure += ($famerape / 10)>>
	<<set $allure += ($famebestiality / 10)>>
	<<set $allure += ($fameexhibitionism / 10)>>
	<<set $allure += ($famepregnancy / 10)>>

	<<set $allure -= ($famescrap / 2)>>
	<<set $allure -= ($famegood / 2)>>
	<<set $allure -= ($famebusiness / 2)>>
	<<set $allure -= ($famesocial / 2)>>
	<<if $dev is 1>>
		<<set $allure -= ($famepimp / 2)>>
	<</if>>
	<<if $moonstate is "evening" and $hour gte 21 or $moonstate is "morning" and $hour lt 6>>
		<<set $allure += 2000>>
	<</if>>
	<<set $allure *= $alluremod>>
	<<if $allure gte 8000 * $alluremod>><<set $allure to 8000 * $alluremod>><</if>>
	<<if $moorLuck gt 0>>
		<<set $allure to Math.floor($allure * (1 - ($moorLuck / 100)))>>
	<</if>>
	<<if $allure lt 0>>
		<<set $allure to 0>>
	<</if>>

	<<set $attractiveness to (($beauty / 3) + $hairlength / 4 + $worn.upper.reveal + $worn.lower.reveal)>>
	<<if $worn.upper.type.includes("naked")>><<set $attractiveness += $worn.under_upper.reveal>><</if>>
	<<if $worn.lower.type.includes("naked")>><<set $attractiveness += $worn.under_lower.reveal>><</if>>
	<<set $attractiveness += $worn.head.reveal>>
	<<set $attractiveness += $worn.face.reveal>>
	<<set $attractiveness += $worn.neck.reveal>>
	<<set $attractiveness += $worn.legs.reveal>>
	<<set $attractiveness += $worn.feet.reveal>>
	<<if $wolfgirl gte 6>><<set $attractiveness += 500>><</if>>
	<<if $demon gte 6>><<set $attractiveness += 500>><</if>>
	<<if $angel gte 6>><<set $attractiveness += 500>><</if>>
	<<if $fallenangel gte 2>><<set $attractiveness += 500>><</if>>
	<<if $cat gte 6>><<set $attractiveness += 500>><</if>>
	<<if $cow gte 6>><<set $attractiveness += 500>><</if>>
	<<if $harpy gte 6>><<set $attractiveness += 500>><</if>>
	<<if $makeup.lipstick != 0>><<set $attractiveness += 100>><</if>>
	<<if $makeup.eyeshadow != 0>><<set $attractiveness += 100>><</if>>
	<<if $makeup.mascara != 0>><<set $attractiveness += 100>><</if>>
<</widget>>

<!-- NOTE: THIS WIDGET IS UNUSED
<<widget "clothingcaption">>
<<if $worn.upper.name is "naked">>
	<<if $worn.lower.name is "naked">>
		<<if $worn.under_lower.name is "naked" and $worn.genitals.name is "naked">>
			<<if $worn.under_upper.name is "naked">>
			<span class="red">당신은 완전히 알몸이다!</span>
			<<else>>
			<span class="red">당신의 하반신이 완전히 노출되어 있다!</span> <span class="pink">그나마 <<underupperintegrity>> <<clothescolour 'under_upper'>> <<trClothes "under_upper" $worn.under_upper.name "name" "이">>_trResult 조금이나마 위안이 되어준다.</span>
			<</if>>
		<<elseif $worn.under_lower.name is "naked" and $worn.genitals.name isnot "naked">>
			<<if $worn.under_upper.name is "naked">>
				<span class="red">착용한 <<genitalsintegrity>> <<trClothes "genitals" $worn.genitals.name "과" "sep">>_trResult<<if $worn.genitals.anal_shield is 1>>_trPost 애널 보호대<</if>>로는 아무런 위안이 되지 않는다.</span>
			<<else>>
				<span class="red"><<genitalsintegrity>> <<trClothes "genitals" $worn.genitals.name>>_trResult<<if $worn.genitals.anal_shield is 1>>와 애널 보호대<</if>>를 빼면, 당신의 하반신은 완전히 노출되어 있다!</span>
			<</if>>
		<</if>>
		<<if $worn.under_lower.name isnot "naked">>
			<<if $worn.under_upper.name is "naked">>
			<span class="pink">당신은 <<underlowerintegrity>> <<clothescolour 'under_lower'>> <<trClothes "under_lower" $worn.under_lower.name "name" "을">>_trResult 빼곤 아무 것도 입고 있지 않다.</span>
			<<else>>
				<<if $worn.under_lower.set is $worn.under_upper.set>>
				<span class="pink">당신은 <<underupperintegrity>> <<clothescolour 'under_upper'>> <<trClothes "under_upper" $worn.under_upper.name>>_trResult만 입고 있다.</span>
				<<else>>
				<span class="pink">당신은 <<underlowerintegrity>> <<clothescolour 'under_lower'>> <<trClothes "under_lower" $worn.under_lower.name "name" "과">>_trResult <<underupperintegrity>> <<clothescolour 'under_upper'>> <<trClothes "under_upper" $worn.under_upper.name "name" "을">>_trResult 입고 있다.</span>
				<</if>>
			<</if>>
			<<if $worn.genitals.name isnot "naked">>
				당신은 <<genitalsintegrity>> <<trClothes "genitals" $worn.genitals.name>>_trResult<<if $worn.genitals.anal_shield is 1>>와 애널 보호대<</if>>를 착용하고 있다.
			<</if>>
		<</if>>
	<</if>>
	<<if $worn.lower.name isnot "naked">>
		<<if $worn.under_lower.name is "naked">>
			<<if $worn.under_upper.name is "naked">>
			<span class="pink">당신의 상반신은 알몸에 속옷도 입고 있지 않지만</span>, 하반신은 <<lowerintegrity>> <<clothescolour 'lower'>> <<trClothes "lower" $worn.lower.name "name" "이">>_trResult 가리고 있다.
			<<else>>
			<span class="pink">당신은 <<underupperintegrity>> <<clothescolour 'under_upper'>> <<trClothes "under_upper" $worn.under_upper.name "name" "과" "sep">>_trResult</span>_trPost <<lowerintegrity>> <<clothescolour 'lower'>> <<trClothes "lower" $worn.lower.name "name" "을">>_trResult 입고 있고, <span class="purple">그 아래에는 아무 것도 입고 있지 않다.</span>
			<</if>>
			<<if $worn.genitals.name isnot "naked">>
				당신은 <<genitalsintegrity>> <<trClothes "genitals" $worn.genitals.name>>_trResult<<if $worn.genitals.anal_shield is 1>>와 애널 보호대<</if>>를 착용하고 있다.
			<</if>>
		<</if>>
		<<if $worn.under_lower.name isnot "naked">>
			<<if $worn.under_upper.name is "naked">>
			<span class="pink">당신의 상반신은 알몸이고</span> <<lowerintegrity>> <<clothescolour 'lower'>> <<trClothes "lower" $worn.lower.name "name" "과">>_trResult <<underlowerintegrity>> <<clothescolour 'under_lower'>> <<trClothes "under_lower" $worn.under_lower.name "name" "을">>_trResult 입고 있다.
			<<else>>
			당신의 하반신은 <<lowerintegrity>> <<clothescolour 'lower'>> <<trClothes "lower" $worn.lower.name "name" "과">>_trResult <<underlowerintegrity>> <<clothescolour 'under_lower'>> <<trClothes "under_lower" $worn.under_lower.name "name" "이">>_trResult 가리고 있지만, <span class="pink"><<underupperintegrity>> <<clothescolour 'under_upper'>> <<trClothes "under_upper" $worn.under_upper.name>>_trResult만이 당신의 가슴을 보호하고 있다.</span>
			<</if>>
			<<if $worn.genitals.name isnot "naked">>
				당신은 <<genitalsintegrity>> <<trClothes "genitals" $worn.genitals.name>>_trResult<<if $worn.genitals.anal_shield is 1>>와 애널 보호대<</if>>를 착용하고 있다.
			<</if>>
		<</if>>
	<</if>>
<<elseif $worn.upper.name isnot "naked">>
	<<if $worn.lower.name is "naked">>
		<<if $worn.under_lower.name is "naked">>
			<<if $worn.upper.one_piece is "broken" and $worn.lower.set isnot $worn.upper.set>>
				<<if $worn.under_upper.name is "naked">>
				당신은 허리 아래가 뜯겨나간 <<upperintegrity>> <<clothescolour 'upper'>> <<trClothes "upper" $worn.upper.name "name" "을">>_trResult 입고 있어서 <span class="red"> 하반신이 완전히 노출되어 있다!</span>
				<<else>>
				당신은 허리 아래가 뜯겨나간 <<upperintegrity>> <<clothescolour 'upper'>> <<trClothes "upper" $worn.upper.name>>_trResult 밑에 <<underupperintegrity>> <<clothescolour 'under_upper'>> <<trClothes "under_upper" $worn.under_upper.name>>_trResult만을 입고 있어서 <span class="red">하반신이 완전히 노출되어 있다!</span>
				<</if>>
			<<else>>
				<<if $worn.under_upper.name is "naked">>
				<span class="red">당신의 하반신은 완전히 노출되어 있다!</span> 상반신은 <<upperintegrity>> <<clothescolour 'upper'>> <<trClothes "upper" $worn.upper.name "name" "이">>_trResult 가리고 있으나, <span class="purple">그 밑엔 아무 것도 입지 않았다.</span>
				<<else>>
				<span class="red">당신의 하반신은 완전히 노출되어 있다!</span> 상반신에는 <<upperintegrity>> <<clothescolour 'upper'>> <<trClothes "upper" $worn.upper.name "name" "을">>_trResult 입고 있고, 그 밑에 <<underupperintegrity>> <<clothescolour 'under_upper'>> <<trClothes "under_upper" $worn.under_upper.name "name" "을">>_trResult 입고 있다.
				<</if>>
			<</if>>
			<<if $worn.genitals.name isnot "naked">>
				<span class="red">착용하고 있는 <<genitalsintegrity>> <<trClothes "genitals" $worn.genitals.name>>_trResult<<if $worn.genitals.anal_shield is 1>>와 애널 보호대<</if>>는 아무런 위안이 되지 않는다.</span>
			<</if>>
		<</if>>
		<<if $worn.under_lower.name isnot "naked">>
			<<if $worn.upper.one_piece is "broken" and $worn.lower.set isnot $worn.upper.set>>
				<<if $worn.under_upper.name is "naked">>
				당신은 허리 아래가 뜯겨나간 <<upperintegrity>> <<clothescolour 'upper'>> <<trClothes "upper" $worn.upper.name "name" "을">>_trResult 입고 있어서 <span class="purple"> <<underlowerintegrity>> <<clothescolour 'under_lower'>> <<trClothes "under_lower" $worn.under_lower.name "name" "이">>_trResult 노출되어 있다.</span>
				<<else>>
				당신은 <<underupperintegrity>> <<clothescolour 'under_upper'>> $worn.under_upper.name 위에 허리 아래가 뜯겨나간 <<upperintegrity>> <<clothescolour 'upper'>> <<trClothes "upper" $worn.upper.name "name" "을">>_trResult 입고 있어서 <span class="purple"><<underlowerintegrity>> <<clothescolour 'under_lower'>> <<trClothes "under_lower" $worn.under_lower.name "name" "이">>_trResult 노출되어 있다.</span>
				<</if>>
			<<else>>
				<<if $worn.under_upper.name is "naked">>
				당신은 <<upperintegrity>> <<clothescolour 'upper'>> <<trClothes "upper" $worn.upper.name "name" "을">>_trResult 입고 있고 <span class="purple"><<underlowerintegrity>> <<clothescolour 'under_lower'>> <<trClothes "under_lower" $worn.under_lower.name "name" "이">>_trResult 노출되어 있다.</span>
				<<else>>
					<<if $worn.under_upper.one_piece is 1>>
					당신은 <<upperintegrity>> <<clothescolour 'upper'>> <<trClothes "upper" $worn.upper.name>>_trResult 밑에 <<underupperintegrity>> <<clothescolour 'under_upper'>> <<trClothes "under_upper" $worn.under_upper.name "name" "을">>_trResult 입고 있다. <span class="purple">허리 밑으로 <<trClothes "under_upper" $worn.under_upper.name "name" "이">>_trResult 보인다.</span>
					<<else>>
					당신은 <<upperintegrity>> <<clothescolour 'upper'>> <<trClothes "upper" $worn.upper.name>>_trResult 밑에 <<underupperintegrity>> <<clothescolour 'under_upper'>> <<trClothes "under_upper" $worn.under_upper.name "name" "을">>_trResult 입고 있고 <span class="purple"><<underlowerintegrity>> <<clothescolour 'under_lower'>> <<trClothes "under_lower" $worn.under_lower.name "name" "이">>_trResult 노출되어 있다.</span>
					<</if>>
				<</if>>
			<</if>>
			<<if $worn.genitals.name isnot "naked">>
				당신의 <<genitalsintegrity>> <<trClothes "genitals" $worn.genitals.name>>_trResult<<if $worn.genitals.anal_shield is 1>>와 애널 보호대<</if>>가 <<if $worn.under_lower.reveal gte 500>>분명하게 드러나있다<<else>>언뜻 보인다<</if>>.
			<</if>>
		<</if>>
	<</if>>
	<<if $worn.lower.name isnot "naked">>
		<<if $worn.under_lower.name is "naked">>
			<<if $worn.under_upper.name is "naked">>
			당신은 <<upperintegrity>> <<clothescolour 'upper'>> <<trClothes "upper" $worn.upper.name "name" "을">>_trResult
				<<if $worn.lower.one_piece isnot 1>>
				<<lowerintegrity>> <<clothescolour 'lower'>> <<trClothes "lower" $worn.lower.name "name" "과">>_trResult 함께
				<</if>>
			입고 <<if $worn.lower.type.includes("swim")>>있고<<else>>있으나<</if>> <span class="purple">속옷을 입고 있지 않다.</span>
			<<else>>
				당신은 <<upperintegrity>> <<clothescolour 'upper'>> <<trClothes "upper" $worn.upper.name "name" "을">>_trResult
				<<if $worn.lower.one_piece isnot 1>>
				<<lowerintegrity>> <<clothescolour 'lower'>> <<trClothes "lower" $worn.lower.name "name" "과">>_trResult 함께
				<</if>>
				입고 <<if $worn.under_upper.one_piece is "broken">>
				<span class="purple">그 밑에는 허리 아래가 뜯겨나간 <<underupperintegrity>> <<clothescolour 'under_upper'>> <<trClothes "under_upper" $worn.under_upper.name>>_trResult만을 입고 있다.</span>
				<<else>>
				<span class="purple">그 밑에는 <<underupperintegrity>> <<clothescolour 'under_upper'>> <<trClothes "under_upper" $worn.under_upper.name>>_trResult만을 입고 있다.</span>
				<</if>>
			<</if>>
			<<if $worn.genitals.name isnot "naked">>
				당신은 <<genitalsintegrity>> <<trClothes "genitals" $worn.genitals.name>>_trResult<<if $worn.genitals.anal_shield is 1>>와 애널 보호대<</if>>를 착용하고 있다.
			<</if>>
		<</if>>
		<<if $worn.under_lower.name isnot "naked">>
			<<if $worn.under_upper.name is "naked">>
			당신은 <<upperintegrity>> <<clothescolour 'upper'>> <<trClothes "upper" $worn.upper.name "name" "과" "sep">>_trResult<<if $worn.lower.one_piece isnot 1>>_trPost<<else>>에다가<</if>>
				<<if $worn.lower.one_piece isnot 1>>
				<<lowerintegrity>> <<clothescolour 'lower'>> <<trClothes "lower" $worn.lower.name>>_trResult에다가
				<</if>>
				<<if $breastsize lt 3>>
					그 밑에 <<underlowerintegrity>> <<clothescolour 'under_lower'>> <<trClothes "under_lower" $worn.under_lower.name "name" "을">>_trResult 입고 있다.
				<<else>>
					<span class="purple">그 밑에 <<underlowerintegrity>> <<clothescolour 'under_lower'>> <<trClothes "under_lower" $worn.under_lower.name>>_trResult만 입고 있다.</span>
				<</if>>
			<<else>>
			당신은 <<upperintegrity>> <<clothescolour 'upper'>> <<trClothes "upper" $worn.upper.name "name" "과" "sep">>_trResult<<if $worn.lower.one_piece isnot 1>>_trPost<<else>>에다가<</if>>
				<<if $worn.lower.one_piece isnot 1>>
				<<lowerintegrity>> <<clothescolour 'lower'>> <<trClothes "lower" $worn.lower.name>>_trResult에다가
				<</if>>
				<<if $worn.under_lower.one_piece is 1>>
				그 밑에 <<underupperintegrity>> <<clothescolour 'under_upper'>> <<trClothes "under_upper" $worn.under_upper.name "name" "을">>_trResult 입고 있다.
				<<else>>
				그 밑에 <<underlowerintegrity>> <<clothescolour 'under_lower'>> <<trClothes "under_lower" $worn.under_lower.name "name" "과">>_trResult <<underupperintegrity>> <<clothescolour 'under_upper'>> <<trClothes "under_upper" $worn.under_upper.name "name" "을">>_trResult 입고 있다.
				<</if>>
			<</if>>
			<<if $worn.genitals.name isnot "naked">>
				당신은 <<genitalsintegrity>> <<trClothes "genitals" $worn.genitals.name>>_trResult<<if $worn.genitals.anal_shield is 1>>와 애널 보호대<</if>>를 착용하고 있다.
			<</if>>
		<</if>>
	<</if>>
<</if>>

<<if $worn.face.type.includes("mask")>>
<br>
당신의 신원은 <<trClothes "face" $worn.face.name>>_trResult로 인해 감춰져 있다.
<</if>>

<</widget>>
-->

<!-- NOTE: THIS WIDGET IS UNUSED 
<<widget "stripcaption">>

<<if !$worn.upper.type.includes("naked") and $upperwetstage gte 3 and !$worn.lower.type.includes("naked") and $lowerwetstage gte 3 and !$worn.under_lower.type.includes("naked") and !$worn.genitals.type.includes("chastity") and $underlowerwetstage gte 3 and !$worn.under_upper.type.includes("naked") and $underupperwetstage gte 3>>
	<<if $worn.under_upper.set is $worn.under_lower.set>>
		<<if $worn.upper.set is $worn.lower.set>>
	<br>
	당신의 <<trClothes "upper" $worn.upper.name "name" "과">>_trResult <<trClothes "under_upper" $worn.under_upper.name "name" "은">>_trResult 완전히 젖어, <span class="pink"><<breastsPost "과">> <<genitalsPost "을">> 노출하고 있다.</span>
	<br>
		<<else>>
	<br>
	당신의 <<trClothes "upper" $worn.upper.name>>_trResult, <<trClothes "lower" $worn.lower.name "name" "과">>_trResult <<trClothes "under_upper" $worn.under_upper.name "name" "은">>_trResult 완전히 젖어, <span class="pink"><<breastsPost "과">> <<genitalsPost "을">> 노출하고 있다.</span>
	<br>
		<</if>>

	<<else>>
		<<if $worn.upper.set is $worn.lower.set>>
	<br>
	당신의 <<trClothes "upper" $worn.upper.name>>_trResult, <<trClothes "under_lower" $worn.under_lower.name "name" "과">>_trResult <<trClothes "under_upper" $worn.under_upper.name "name" "은">>_trResult 완전히 젖어, <span class="pink"><<breastsPost "과">> <<genitalsPost "을">> 노출하고 있다.</span>
	<br>
		<<else>>
	<br>
	당신의 <<trClothes "upper" $worn.upper.name>>_trResult, <<trClothes "lower" $worn.lower.name>>_trResult, <<trClothes "under_lower" $worn.under_lower.name "name" "과">>_trResult <<trClothes "under_upper" $worn.under_upper.name "name" "은">>_trResult 완전히 젖어, <span class="pink"><<breastsPost "과">> <<genitalsPost "을">> 노출하고 있다.</span>
	<br>
		<</if>>
	<</if>>

<<elseif !$worn.upper.type.includes("naked") and $upperwetstage gte 3 and !$worn.lower.type.includes("naked") and $lowerwetstage gte 3 and !$worn.under_lower.type.includes("naked") and !$worn.genitals.type.includes("chastity") and $underlowerwetstage gte 3>>
	<<if $worn.upper.set is $worn.lower.set>>
<br>
당신의 <<trClothes "upper" $worn.upper.name "name" "과">>_trResult <<trClothes "under_lower" $worn.under_lower.name "name" "은">>_trResult 완전히 젖어, <span class="pink"><<undertopPost "과">> <<genitalsPost "을">> 노출하고 있다.</span>
<br>
	<<else>>
<br>
당신의 <<trClothes "upper" $worn.upper.name>>_trResult, <<trClothes "lower" $worn.lower.name "name" "과">>_trResult <<trClothes "under_lower" $worn.under_lower.name "name" "은">>_trResult 완전히 젖어, <span class="pink"><<undertopPost "과">> <<genitalsPost "을">> 노출하고 있다.</span>
<br>
	<</if>>

<<elseif !$worn.upper.type.includes("naked") and $upperwetstage gte 3 and !$worn.under_upper.type.includes("naked") and $underupperwetstage gte 3 and $lowerwetstage gte 3 and !$worn.lower.type.includes("naked")>>
	<<if $worn.upper.set is $worn.lower.set>>
	<br>
	당신의 <<trClothes "upper" $worn.upper.name "name" "과">>_trResult <<trClothes "under_upper" $worn.under_upper.name "name" "은">>_trResult 완전히 젖어, <span class="purple"><<breastsPost "과">> <<undiesPost "을">> 노출하고 있다.</span>
	<br>
	<<else>>
	<br>
	당신의 <<trClothes "upper" $worn.upper.name>>_trResult, <<trClothes "lower" $worn.lower.name "name" "과">>_trResult <<trClothes "under_upper" $worn.under_upper.name "name" "은">>_trResult 완전히 젖어, <span class="purple"><<breastsPost "과">> <<undiesPost "을">> 노출하고 있다.</span>
	<br>
	<</if>>

<<elseif !$worn.upper.type.includes("naked") and $upperwetstage gte 3 and $lowerwetstage gte 3 and !$worn.lower.type.includes("naked")>>
	<<if $worn.upper.set is $worn.lower.set>>
<br>
당신의 <<trClothes "upper" $worn.upper.name "name" "은">>_trResult 완전히 젖어, <span class="purple"><<undertopPost "과">> <<undiesPost "을">> 노출하고 있다.</span>
<br>
	<<else>>
<br>
당신의 <<trClothes "upper" $worn.upper.name "name" "과">>_trResult <<trClothes "lower" $worn.lower.name "name" "은">>_trResult 완전히 젖어, <span class="purple"><<undertopPost "과">> <<undiesPost "을">> 노출하고 있다.</span>
<br>
	<</if>>

<<elseif !$worn.upper.type.includes("naked") and $upperwetstage gte 3>>
<br>
당신의 <<trClothes "upper" $worn.upper.name "name" "은">>_trResult 완전히 젖어, <span class="purple"><<breastsPost "을">> 노출하고 있다.</span>
<br>

<<elseif !$worn.lower.type.includes("naked") and $lowerwetstage gte 3 and !$worn.under_lower.type.includes("naked") and !$worn.genitals.type.includes("chastity") and $underlowerwetstage gte 3>>
<br>
당신의 <<trClothes "lower" $worn.lower.name "name" "과">>_trResult <<trClothes "under_lower" $worn.under_lower.name "name" "은">>_trResult 완전히 젖어, <span class="pink"><<genitalsPost "을">> 노출하고 있다.</span>
<br>

<<elseif !$worn.lower.type.includes("naked") and $lowerwetstage gte 3>>
<br>
당신의 <<trClothes "lower" $worn.lower.name "name" "은">>_trResult 완전히 젖어, <span class="purple"><<undiesPost "을">> 노출하고 있다.</span>
<br>

<<elseif !$worn.under_lower.type.includes("naked") and !$worn.genitals.type.includes("chastity") and $underlowerwetstage gte 3>>
<br>
당신의 <<trClothes "under_lower" $worn.under_lower.name "name" "은">>_trResult 완전히 젖어, <span class="pink"><<genitalsPost "을">> 노출하고 있다.</span>
<br>

<<elseif !$worn.under_upper.type.includes("naked") and $underupperwetstage gte 3>>
<br>
당신의 <<trClothes "under_upper" $worn.under_upper.name "name" "은">>_trResult 완전히 젖어, <span class="pink"><<breastsPost "을">> 노출하고 있다.</span>
<br>

<<elseif !$worn.upper.type.includes("naked") and $worn.upper.exposed is 2 and !$worn.lower.type.includes("naked") and $worn.lower.exposed is 2 and !$worn.under_lower.type.includes("naked") and !$worn.genitals.type.includes("chastity") and $worn.under_lower.state isnot "waist" and !$worn.under_upper.type.includes("naked") and $worn.under_upper.state isnot setup.clothes.under_upper[clothesIndex('under_upper', $worn.under_upper)].state_base>>
	<<if $worn.under_upper.set is $worn.under_lower.set>>
		<<if $worn.upper.set is $worn.lower.set>>
	<br>
	당신의 <<trClothes "upper" $worn.upper.name>>_trResult, 치마와 <<trClothes "under_upper" $worn.under_upper.name "name" "은">>_trResult 옆으로 제쳐져, <span class="pink"><<breastsPost "과">> <<genitalsPost "을">> 노출하고 있다.</span>
	<br>
		<<else>>
	<br>
	당신의 <<trClothes "upper" $worn.upper.name>>_trResult, <<trClothes "lower" $worn.lower.name "name" "과">>_trResult <<trClothes "under_upper" $worn.under_upper.name "name" "은">>_trResult 옆으로 제쳐져, <span class="pink"><<breastsPost "과">> <<genitalsPost "을">> 노출하고 있다.</span>
	<br>
		<</if>>
	<<else>>
		<<if $worn.upper.set is $worn.lower.set>>
	<br>
	당신의 <<trClothes "upper" $worn.upper.name>>_trResult, 치마, <<trClothes "under_upper" $worn.under_upper.name "name" "과">>_trResult <<trClothes "under_lower" $worn.under_lower.name "name" "은">>_trResult 옆으로 제쳐져, <span class="pink"><<breastsPost "과">> <<genitalsPost "을">> 노출하고 있다.</span>
	<br>
		<<else>>
	<br>
	당신의 <<trClothes "upper" $worn.upper.name>>_trResult, <<trClothes "lower" $worn.lower.name>>_trResult, <<trClothes "under_upper" $worn.under_upper.name "name" "과">>_trResult <<trClothes "under_lower" $worn.under_lower.name "name" "은">>_trResult 옆으로 제쳐져, <span class="pink"><<breastsPost "과">> <<genitalsPost "을">> 노출하고 있다.</span>
	<br>
		<</if>>
	<</if>>

<<elseif !$worn.upper.type.includes("naked") and $worn.upper.exposed is 2 and !$worn.lower.type.includes("naked") and $worn.lower.exposed is 2 and !$worn.under_lower.type.includes("naked") and !$worn.genitals.type.includes("chastity") and $worn.under_lower.state isnot "waist">>
	<<if $worn.upper.set is $worn.lower.set>>
<br>
당신의 <<trClothes "upper" $worn.upper.name>>_trResult, 치마와 <<trClothes "under_lower" $worn.under_lower.name "name" "은">>_trResult 옆으로 제쳐져, <span class="pink"><<undertopPost "과">> <<genitalsPost "을">> 노출하고 있다.</span>
<br>
	<<else>>
<br>
당신의 <<trClothes "upper" $worn.upper.name>>_trResult, <<trClothes "lower" $worn.lower.name "name" "과">>_trResult <<trClothes "under_lower" $worn.under_lower.name "name" "은">>_trResult 옆으로 제쳐져, <span class="pink"><<undertopPost "과">> <<genitalsPost "을">> 노출하고 있다.</span>
<br>
	<</if>>

<<elseif !$worn.upper.type.includes("naked") and $worn.upper.exposed is 2 and $worn.lower.exposed is 2 and !$worn.lower.type.includes("naked") and !$worn.under_upper.type.includes("naked") and $worn.under_upper.state isnot setup.clothes.under_upper[clothesIndex('under_upper', $worn.under_upper)].state_base>>
	<<if $worn.upper.set is $worn.lower.set>>
<br>
당신의 <<trClothes "upper" $worn.upper.name>>_trResult, 치마와 <<trClothes "under_upper" $worn.under_upper.name "name" "은">>_trResult 옆으로 제쳐져, <span class="purple"><<breastsPost "과">> <<undiesPost "을">> 노출하고 있다.</span>
<br>
	<<else>>
<br>
당신의 <<trClothes "upper" $worn.upper.name>>_trResult, <<trClothes "lower" $worn.lower.name "name" "과">>_trResult <<trClothes "under_upper" $worn.under_upper.name "name" "은">>_trResult 옆으로 제쳐져, <span class="purple"><<breastsPost "과">> <<undiesPost "을">> 노출하고 있다.</span>
<br>
	<</if>>

<<elseif !$worn.upper.type.includes("naked") and $worn.upper.exposed is 2 and $worn.lower.exposed is 2 and !$worn.lower.type.includes("naked")>>
	<<if $worn.upper.set is $worn.lower.set>>
<br>
당신의 <<trClothes "upper" $worn.upper.name "name" "과">>_trResult 치마는 옆으로 제쳐져, <span class="purple"><<undertopPost "과">> <<undiesPost "을">> 노출하고 있다.</span>
<br>
	<<else>>
<br>
당신의 <<trClothes "upper" $worn.upper.name "name" "과">>_trResult <<trClothes "lower" $worn.lower.name "name" "은">>_trResult 옆으로 제쳐져, <span class="purple"><<undertopPost "과">> <<undiesPost "을">> 노출하고 있다.</span>
<br>
	<</if>>

<<elseif !$worn.upper.type.includes("naked") and $worn.upper.exposed is 2>>
<br>
당신의 <<trClothes "upper" $worn.upper.name "name" "은">>_trResult 옆으로 제쳐져, <span class="purple"><<breastsPost "을">> 노출하고 있다.</span>
<br>

<<elseif !$worn.lower.type.includes("naked") and $worn.lower.exposed is 2 and !$worn.under_lower.type.includes("naked") and !$worn.genitals.type.includes("chastity") and $worn.under_lower.state isnot "waist">>
<br>
당신의 <<trClothes "lower" $worn.lower.name "name" "은">>_trResult 옆으로 제쳐져 있고 <<trClothes "under_lower" $worn.under_lower.name "name" "은">>_trResult 내려져서, <span class="pink"><<genitalsPost "이">> 노출되어 있다.</span>
<br>

<<elseif !$worn.lower.type.includes("naked") and $worn.lower.exposed is 2>>
<br>
당신의 <<trClothes "lower" $worn.lower.name "name" "은">>_trResult 옆으로 제쳐져, <span class="purple"><<undiesPost "을">> 노출하고 있다.</span>
<br>

<<elseif !$worn.under_lower.type.includes("naked") and !$worn.genitals.type.includes("chastity") and $worn.under_lower.state isnot setup.clothes.under_lower[clothesIndex('under_lower', $worn.under_lower)].state_base>>
<br>

당신의 <<trClothes "under_lower" $worn.under_lower.name "name" "은">>_trResult
<<if $worn.under_lower.state is "totheside">>
	옆으로 제쳐져서,
<<else>>
	<<trBodypart $worn.under_lower.state>>_trResult까지 내려져서,
<</if>>
<span class="pink"><<genitalsPost "을">> 노출하고 있다.</span>
<br>

<<elseif !$worn.under_upper.type.includes("naked") and $worn.under_upper.state isnot setup.clothes.under_upper[clothesIndex('under_upper', $worn.under_upper)].state_base>>
<br>

당신의 <<trClothes "under_upper" $worn.under_upper.name "name" "은">>_trResult <<trBodypart $worn.under_upper.state>>_trResult까지 내려져서, <span class="pink"><<breastsPost "을">> 노출하고 있다.</span>
<br>

<</if>>

<</widget>>
-->

<<widget "clock">><<silently>>
<<if $hour gte 12>>
	<<set _hour to $hour - 12>>
<<else>>
	<<set _hour to $hour>>
<</if>>
<<if $time - $hour * 60 lt 30>>
	<<switch _hour>>
		<<case 1>><<set _text_output to "🕐">>
		<<case 2>><<set _text_output to "🕑">>
		<<case 3>><<set _text_output to "🕒">>
		<<case 4>><<set _text_output to "🕓">>
		<<case 5>><<set _text_output to "🕔">>
		<<case 6>><<set _text_output to "🕕">>
		<<case 7>><<set _text_output to "🕖">>
		<<case 8>><<set _text_output to "🕗">>
		<<case 9>><<set _text_output to "🕘">>
		<<case 10>><<set _text_output to "🕙">>
		<<case 11>><<set _text_output to "🕚">>
		<<case 0>><<set _text_output to "🕛">>
		<<default>><<set _text_output to "OHNO">>
	<</switch>>
<<else>>
	<<switch _hour>>
		<<case 1>><<set _text_output to "🕜">>
		<<case 2>><<set _text_output to "🕝">>
		<<case 3>><<set _text_output to "🕞">>
		<<case 4>><<set _text_output to "🕟">>
		<<case 5>><<set _text_output to "🕠">>
		<<case 6>><<set _text_output to "🕡">>
		<<case 7>><<set _text_output to "🕢">>
		<<case 8>><<set _text_output to "🕣">>
		<<case 9>><<set _text_output to "🕤">>
		<<case 10>><<set _text_output to "🕥">>
		<<case 11>><<set _text_output to "🕦">>
		<<case 0>><<set _text_output to "🕧">>
		<<default>><<set _text_output to "OHNO">>
	<</switch>>
<</if>>
<</silently>>
<<print _text_output>>
<</widget>>

<<widget "statsCaption">>
	<<if $dev is 1>>
		<<set $money = Math.trunc($money)>>
		£<<print ($money / 100)>>.
	<<else>>
		<<printmoney $money true>>
	<</if>>
	&nbsp;
	<<if !$oldclock>>
		<<clock>>
	<<else>>
		<img class="icon_ui" src="img/ui/icon_time.png">
	<</if>>
	<<ampm>>
	&nbsp;
	<<if $extendedStats>>
		<br>
	<</if>>
	<img class="icon_ui" src="img/ui/icon_day.png">
	<<switch $weekday>>
	<<case 1>>日<<case 2>>月<<case 3>>火<<case 4>>水<<case 5>>木<<case 6>>金<<case 7>>土
	<</switch>>
	<<if $extendedStats>>
		<<month true>> $monthday<<monthday>>
	<</if>>
<</widget>>

<<widget "statsMoneyNoImg">>
	<<if $dev is 1>>
		<<set $money = Math.trunc($money)>>
		£<<print ($money / 100)>>를 갖고 있다
		<br>
	<<else>>
		<<printmoney $money true>>를 갖고 있다
		<br>
	<</if>>
<</widget>>

<<widget "startingPlayerImage">>
<<set $naturalhaircolour to $hairselect>>
<<set _filters to {
	"body": skinColor("t", $skinColor.range, setup.skinColor[$skinColor.natural]),
	"breasts": skinColor("t", $skinColor.range, setup.skinColor[$skinColor.natural]),
	"penis": skinColor("t", $skinColor.range, setup.skinColor[$skinColor.natural]),
	"mouth": skinColor("t", $skinColor.range, setup.skinColor[$skinColor.natural]),
}>>
<<set _img to setup.tanImg.sidebar["t"]>>
<<if $hairlength gte 900>>
	<<set _hairlengthstage to "feet">>
<<elseif $hairlength gte 700>>
	<<set _hairlengthstage to "thighs">>
<<elseif $hairlength gte 600>>
	<<set _hairlengthstage to "navel">>
<<elseif $hairlength gte 400>>
	<<set _hairlengthstage to "chest">>
<<elseif $hairlength gte 200>>
	<<set _hairlengthstage to "shoulder">>
<<else>>
	<<set _hairlengthstage to "short">>
<</if>>

<<set _fringelengthstage to "short">>
<<if _showClothes is undefined>>
	<<set _showClothes to true>>
<</if>>

<<if $player.gender is "m">>
	<<set _clothesType to "male">>
<<elseif $player.gender is "h">>
	<<if $player.gender_body is "m" or ($player.gender_body is "a" and $breastsize lte 3)>>
		<<set _clothesType to "male">>
	<<else>> <!-- if $player.gender_body is "f" or ($player.gender_body is "a" and $breastsize gt 3)) --> 
		<<set _clothesType to "female">>
	<</if>>
<<else>> <!-- if $player.gender is "f" -->
	<<set _clothesType to "female">>
<</if>>

<<if $background is "crossdresser">>
	<<set _clothesType to (_clothesType is "male" ? "female" : "male")>>
<</if>>

<div id="img" @class="'hair-'+ $hairselect + ' eye-' + $eyeselect.replace(/ /g,'-') + ($imgLighten isnot '' ? ' '+ $imgLighten :'') + ' noAnimations'">
	/*Prep for image checks*/
	<<switch $breastsize>>
	<<case 12>>
		<<set _breastSize to 6>>
	<<case 8 9 10 11>>
		<<set _breastSize to 5>>
	<<case 6 7>>
		<<set _breastSize to 4>>
	<<case 4 5>>
		<<set _breastSize to 3>>
	<<case 3>>
		<<set _breastSize to 2>>
	<<case 0 1 2>>
		<<set _breastSize to 1>>
	<</switch>>
	<<if $player.gender is "m" or $player.gender is "h">>
		<<set _penisSize to $penissize>>
	<<else>>
		<<unset _penisSize>>
	<</if>>
	<<set _disabled to ["disabled","hidden"]>>

	<<if $sidebarRenderer is undefined>>
		<<set $sidebarRenderer to 'canvas'>>
	<</if>>
	<<if $sidebarRenderer isnot 'img'>>
		<<selectmodel "main" "sidebar">> <!-- reuse sidebar cache slot -->
		<<twinescript>>
			_modeloptions.breast_size = _breastSize;
			_modeloptions.breasts = (!_showUnderwear && !_showClothes) ? "default" : "cleavage";
			if (_penisSize isnot undefined) {
				_modeloptions.penis = $player.virginity.penile is true ? "virgin" : "default";
				_modeloptions.penis_size = _penisSize;
				_modeloptions.balls = $player.gender is "h" ? $player.ballsExist : true;
			}

			_modeloptions.skin_type = $skinColor.natural;
			_modeloptions.skin_tone = $skinColor.range/100;

			_modeloptions.hair_colour = $hairselect;
			_modeloptions.hair_sides_position = $hairposition;
			_modeloptions.hair_sides_length = _hairlengthstage;
			_modeloptions.hair_fringe_length = _hairlengthstage;

			_modeloptions.eyes_colour = $eyeselect;
			_modeloptions.mouth = "neutral";
			_modeloptions.freckles = $player.freckles is true;

			_modeloptions.demon_wings_type = $transformationParts.demon.wings;
			_modeloptions.angel_wings_type = $transformationParts.angel.wings;
			_modeloptions.fallen_wings_type = $transformationParts.fallenAngel.wings;

			if (_clothesType is "male") {
				if (_showClothes) {
					_modeloptions.worn_upper = 4; /* t-shirt */
					_modeloptions.worn_upper_colour = "tangerine";
					_modeloptions.worn_lower = 5; /* shorts */
					_modeloptions.worn_lower_colour = "blue";
					_modeloptions.worn_legs = 2; /* boysgymsocks */
					_modeloptions.worn_feet = 1; /* schoolshoes */
				}
				if (_showUnderwear) {
					_modeloptions.worn_under_lower = 4; /* briefs */
					_modeloptions.worn_under_lower_colour = "black";
				}
			} else if (_clothesType is "female") {
				if (_showClothes) {
					_modeloptions.worn_upper = 1; /* sundress */
					_modeloptions.worn_upper_colour = "white";
					_modeloptions.worn_lower = 1; /* sundress */
					_modeloptions.worn_lower_colour = "white";
					_modeloptions.worn_legs = 3; /* girlsgymsocks */
					_modeloptions.worn_feet = 1; /* schoolshoes */
				}
				if (_showUnderwear) {
					if ($breastsize > 3) {
						_modeloptions.worn_under_upper = 12; /* plainbra */
						_modeloptions.worn_under_upper_colour = "pale white";
					}
					_modeloptions.worn_under_lower = 1; /* plainpanties */
					_modeloptions.worn_under_lower_colour = "pale white";
				}
			}
			_modeloptions.crotch_visible = !_showClothes && !_showUnderwear;
		<</twinescript>>
		<<rendermodel `($sidebarRenderer is 'both' ? 'canvasimg-both' : '')`>>
	<</if>>
	<<if $sidebarRenderer isnot 'canvas'>>
	<img class="layer-base" @src="_img.basenoarms" @style="'filter: '+_filters.body">
	<img class="layer-basehead" @src="_img.basehead" @style="'filter: '+_filters.body">

	<img class="layer-breasts" @src="_img['breasts'+ _breastSize]" @style="'filter: '+_filters.breasts">
	<<if $skinColor.tanImgEnabled is "t" and $skinColor.tanValues[0] isnot $skinColor.tanValues[1]>>
		<img class="layer-breasts" @src="_img.baseTanBikini_UUpper + _breastSize + '.png'" @style="'filter: '+_filters.bikiniTop">
	<</if>>

	<img class="layer-base" @src="_img.leftarmidle" @style="'filter: '+_filters.body">

	<<if !_disabled.includes($transformationParts.demon.wings)>>
		<<if $exposed gte 2 and $dontHide is false and $uncomfortable.flaunting is false>>
			<img class="layer-tailPenisCover" @src="'img/transformations/demon/flauntwings/'+$transformationParts.demon.wings+'.png'">
		<<else>>
			<img class="layer-backhair" @src="'img/transformations/demon/wings/'+$transformationParts.demon.wings+'.png'">
		<</if>>
	<</if>>
	<<if !_disabled.includes($transformationParts.angel.wings)>>
		<img class="layer-backhair" @src="'img/transformations/angel/rightwing/'+$transformationParts.angel.wings+'.png'">
	<</if>>
	<<if !_disabled.includes($transformationParts.fallenAngel.wings)>>
		<img class="layer-backhair" @src="'img/transformations/fallen/rightwing/'+$transformationParts.fallenAngel.wings+'.png'">
	<</if>>

	<img class="layer-base" @src="_img.rightarmidle" @style="'filter: '+_filters.body">

	<<if $hairposition is "front">>
		<img class="layer-hairforwards colour-hair" @src="'img/hair/sides/default/' + _hairlengthstage + '.png'">
	<<else>>
		<img class="layer-backhair colour-hair" @src="'img/hair/sides/default/' + _hairlengthstage + '.png'">
	<</if>>
	<img class="layer-fronthair colour-hair" @src="'img/hair/fringe/default/' + _fringelengthstage + '.png'">

	<<if _hairlengthstage is "thighs" and $hairtype is "default">>
		<img class="layer-backhair colour-hair" src="img/hair/red/backhairthighsred.png">
	<<elseif _hairlengthstage is "feet" and $hairtype is "default">>
		<img class="layer-backhair colour-hair" src="img/hair/red/backhairfeetred.png">
	<</if>>

	<!-- P image insert here - This is not compatible with female pdmod, requires additional editing - add new layer in base.css-->
	<<if _penisSize isnot undefined and _showClothes is false and _showUnderwear is false>>
		<<if $player.virginity.penile is true>>
			<img class="layer-penis" @src="_img['penis_virgin' + ($player.ballsExist ? '':'noballs') + _penisSize]" @style="'filter: '+_filters.penis">
		<<else>>
			<img class="layer-penis" @src="_img['penis' + ($player.ballsExist ? '':'noballs') + _penisSize]" @style="'filter: '+_filters.penis">
		<</if>>
	<</if>>
	<<if $skinColor.tanImgEnabled is "f">>
		<<set $skinColor.tanImgEnabled to "t">>
		<<set _tanReset to true>>
	<</if>>
	<<faceimg 1>>
	<<if _tanReset>>
		<<set $skinColor.tanImgEnabled to "f">>
		<<unset _tanReset>>
	<</if>>
	<<if _clothesType is "male">>
		<<if _showClothes is true>>
			<div class="clothes-div layer-upper">
				<img class="anim-idle-2f clothes-tangerine" src="img/clothes/upper/tshirt/full.png">
			</div>
			<div class="clothes-div layer-rightarmclothes">
				<img class="anim-idle-2f clothes-tangerine" src="img/clothes/upper/tshirt/right.png">
			</div>
			<div class="clothes-div layer-leftarmclothes">
				<img class="anim-idle-2f clothes-tangerine" src="img/clothes/upper/tshirt/left.png">
			</div>
			<div class="clothes-div layer-lower">
				<img class="anim-idle-2f clothes-blue" src="img/clothes/lower/shorts/full.png">
			</div>
			<div class="clothes-div layer-legs">
				<img class="anim-idle-2f" src="img/clothes/legs/boysgymsocks/full.png">
			</div>
			<div class="clothes-div layer-feet">
				<img class="anim-idle-2f" src="img/clothes/feet/schoolshoes/full.png" style="">
			</div>
		<</if>>
		<<if _showUnderwear is true>>
			<div class="clothes-div layer-under_lower">
				<img class="anim-idle-2f clothes-black" src="img/clothes/under_lower/briefs/full.png">
				<img class="anim-idle-2f " src="img/clothes/under_lower/briefs/acc.png">
			</div>
		<</if>>
	<<elseif _clothesType is "female">>
		<<if _showClothes is true>>
			<div class="clothes-div layer-upper">
				<img class="anim-idle-1f clothes-white" src="img/clothes/upper/sundress/full.png">
				<img class="anim-idle-1f clothes-white" src="img/clothes/upper/sundress/0.png">
			</div>
			<div class="clothes-div layer-lower">
				<img class="anim-idle-1f clothes-white" src="img/clothes/lower/sundress/full.png">
				<img class="anim-idle-1f clothes-white" @src="'img/clothes/upper/sundress/'+_breastSize+'.png'">
			</div>
			<div class="clothes-div layer-legs">
				<img class="anim-idle-1f" src="img/clothes/legs/girlsgymsocks/full.png">
			</div>
			<div class="clothes-div layer-feet">
				<img class="anim-idle-2f" src="img/clothes/feet/schoolshoes/full.png" style="">
			</div>
		<</if>>
		<<if _showUnderwear is true>>
			<<if $breastsize gt 3>>
				<div class="clothes-div layer-under_upper">
					<img class="anim-idle-2f clothes-pale-white" src="img/clothes/under_upper/plainbra/full.png">
					<img class="anim-idle-2f clothes-pale-white" @src="'img/clothes/under_upper/plainbra/'+_breastSize+'.png'">
				</div>
			<</if>>
			<div class="clothes-div layer-under_lower">
				<img class="anim-idle-1f clothes-pale-white" src="img/clothes/under_lower/plainpanties/full.png">
			</div>
		<</if>>
	<</if>>
	<</if>> <!-- renderer switch -->
</div>
<</widget>>

<<widget "startingPlayerImageUpdate">>
<<if $passage is "Start">>
	<<replace #startingPlayerImage>>
		<<startingPlayerImage>>
	<</replace>>
<</if>>
<</widget>>

:: StoryRightSidebar

Testing
